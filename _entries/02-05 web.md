---
sectionid: ratingsweb
sectionclass: h2
title: フロントアプリのデプロイ
parent-id: lab-ratingapp
---

The `rating-web` is a NodeJS application that connects to the `rating-api`. Below are some of the details that you'll need to deploy this.
`rating-web` は `rating-api`に接続するNodeJSアプリケーションです。これを展開するために必要となる情報は以下の通りです。

- GitHub: <https://github.com/microsoft/rating-web>
- コンテナは8080ポートを使用します
- Webアプリケーションは、内部クラスタDNSを介してAPIという名前の環境変数を介してプロキシを使用して接続します。 

### OpenShift CLI を使って `rating-web` をデプロイする

> **Note** You're going to be using [source-to-image (S2I)](#source-to-image-s2i) as a build strategy.

{% collapsible %}

```sh
./oc new-app https://github.com/microsoft/rating-web
```

![Create rating-web using oc cli](media/oc-newapp-ratingweb.png)

{% endcollapsible %}

### 必要な環境変数を設定します

{% collapsible %}

Create the `API` environment variable. The value of this variable is going to be the hostname/port of the `rating-api` service. Typically, this will look like `http://rating-api.workshop.svc.cluster.local:8080`.
環境変数`API` を作成します。この変数の値は、`rating-api` サービスのホスト名/ポートになります。通常、次のようになります。

http://rating-api.workshop.svc.cluster.local:8080

完了したら[Save]をクリックします。

![Create an API environment variable](media/rating-web-envvars.png)

{% endcollapsible %}

### `rating-web` Routeを使ってサービスを公開する

{% collapsible %}

サービスを公開します。

```sh
./oc expose svc/rating-web
```

作成したホスト名を確認します。

```sh
./oc get route rating-web
```

以下のようなレスポンスが得られます。

![Retrieve the created route](media/oc-get-route.png)

Notice the fully qualified domain name (FQDN) is comprised of the application name and project name by default. The remainder of the FQDN, the subdomain, is your Azure Red Hat OpenShift cluster specific apps subdomain.

{% endcollapsible %}

### サービスを確認します

{% collapsible %}

Open the hostname in your browser, you should see the rating app page. Play around, submit a few votes and check the leaderboard.
ブラウザでホスト名を開くと、サンプルのアプリが表示されます。投票して結果をチェックしてください。

![rating-web homepage](media/rating-web-homepage.png)

{% endcollapsible %}

> **Resources**
> * <https://docs.openshift.com/aro/creating_images/s2i.html>
> * <https://docs.openshift.com/aro/dev_guide/routes.html>